{"remainingRequest":"E:\\VUE\\VueProject\\electric-power\\node_modules\\babel-loader\\lib\\index.js!E:\\VUE\\VueProject\\electric-power\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\VUE\\VueProject\\electric-power\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\VUE\\VueProject\\electric-power\\src\\view\\show-data.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\VUE\\VueProject\\electric-power\\src\\view\\show-data.vue","mtime":1602558028644},{"path":"E:\\VUE\\VueProject\\electric-power\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1599874220956},{"path":"E:\\VUE\\VueProject\\electric-power\\node_modules\\babel-loader\\lib\\index.js","mtime":1599874250055},{"path":"E:\\VUE\\VueProject\\electric-power\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1599874220956},{"path":"E:\\VUE\\VueProject\\electric-power\\node_modules\\vue-loader\\lib\\index.js","mtime":1599874242496},{"path":"E:\\VUE\\VueProject\\electric-power\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1599874220956},{"path":"E:\\VUE\\VueProject\\electric-power\\node_modules\\babel-loader\\lib\\index.js","mtime":1599874250055},{"path":"E:\\VUE\\VueProject\\electric-power\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1599874220956},{"path":"E:\\VUE\\VueProject\\electric-power\\node_modules\\vue-loader\\lib\\index.js","mtime":1599874242496}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.array.filter\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport PowerDataFront from \"../components/powerData/power-data-front.vue\";\nimport PowerDataRear from \"../components/powerData/power-data-rear.vue\";\nimport PowerRearLine from \"../components/powerData/power-rear-line.vue\";\nimport PowerFrontLine from \"../components/powerData/power-front-line.vue\";\nexport default {\n  components: {\n    PowerDataFront: PowerDataFront,\n    PowerDataRear: PowerDataRear,\n    PowerRearLine: PowerRearLine,\n    PowerFrontLine: PowerFrontLine\n  },\n  data: function data() {\n    return {\n      showRear: true,\n      //是否显示管理单元数据\n      showFront: false,\n      //是否显示总表数据\n      showFrontLine: false,\n      //是否显示管理单元折线图数据\n      showRearLine: false,\n      //是否显示总表折线图数据\n      showData: true,\n      showLine: false,\n      frontData: {},\n      //存放传过来的总表数据\n      rearData: {},\n      //存放传过来的管理单元数据\n      device: '管理单元',\n      devices: [{\n        value: '管理单元',\n        label: '管理单元'\n      }, {\n        value: '巡查机器人',\n        label: '巡查机器人'\n      }],\n      disabledLine: true,\n      //供电线路输入框是否可用\n      powerSupply: '',\n      //存放当前选择的供电所(编号和名称)\n      powerLine: '',\n      //存放当前选择的供电线路(编号和名称)\n      rearCollector: '',\n      //存放当前选择的管理单元(编号和名称)\n      supply: {},\n      //存放当前选择的供电局（所有信息）\n      line: {},\n      //存放当前选择的供电线路（所有信息）\n      powerSupplyData: [],\n      //存放某个供电局下所有的供电所\n      powerLineData: [] //存放某个供电所下所有的供电线路\n\n    };\n  },\n  mounted: function mounted() {\n    this.getPowerSupplyData(); // this.getPowerLineData(7);\n  },\n  methods: {\n    //获取供电所下所有的供电线路\n    getPowerLineData: function getPowerLineData(id) {\n      var _this = this;\n\n      this.$get('/Power-Supply/GetSupplyAndLine', {\n        PowerSupplyId: id\n      }).then(function (response) {\n        console.log('成功');\n        console.log(response.data);\n        var data = response.data.lineSns;\n        console.log('data');\n        console.log(data);\n        var powerLines = [];\n\n        for (var i = 0; i < data.length; i++) {\n          _this.$set(powerLines, i, {\n            value: data[i].subStationAreas,\n            lineSn: data[i].lineSn\n          });\n        }\n\n        _this.powerLineData = powerLines;\n        console.log('powerLineData');\n        console.log(_this.powerLineData);\n      });\n    },\n    //获取供电局下的所有供电所\n    getPowerSupplyData: function getPowerSupplyData() {\n      var _this2 = this;\n\n      this.$get('/Power-Supply/GetBureauAndSupply').then(function (response) {\n        console.log('供电所请求成功');\n        console.log(response.data);\n        var data = response.data;\n        var powerSupplys = [];\n\n        for (var i = 0; i < data[0].supplys.length; i++) {\n          _this2.$set(powerSupplys, i, {\n            value: data[0].supplys[i].psName,\n            powerSupplyId: data[0].supplys[i].powerSupplyId\n          });\n        }\n\n        _this2.powerSupplyData = powerSupplys;\n        console.log(_this2.powerSupplyData);\n      });\n    },\n    handleSelectSupply: function handleSelectSupply(item) {\n      // console.log(item);\n      this.supply = item;\n      this.powerSupply = item.value;\n      console.log('shuju');\n      console.log(this.supply);\n      console.log(this.powerSupply);\n    },\n    handleSelectLine: function handleSelectLine(item) {\n      console.log(item);\n      this.Line = item;\n      console.log(this.Line);\n    },\n    //搜索供电所\n    querySearchSupply: function querySearchSupply(queryString, cb) {\n      var powerSupplyData = this.powerSupplyData;\n      var results = queryString ? powerSupplyData.filter(this.createFilter(queryString)) : powerSupplyData; // 调用 callback 返回建议列表的数据\n\n      cb(results);\n    },\n    //搜索供电线路\n    querySearchLine: function querySearchLine(queryString, cb) {\n      var powerLineData = this.powerLineData;\n      var results = queryString ? powerLineData.filter(this.createFilter(queryString)) : powerLineData; // 调用 callback 返回建议列表的数据\n\n      cb(results);\n    },\n    createFilter: function createFilter(queryString) {\n      return function (restaurant) {\n        return restaurant.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    },\n    //传递管理单元数据\n    transmitRearData: function transmitRearData(val) {\n      this.rearData = val;\n    },\n    //切换到总表折线图\n    switchTFrontLine: function switchTFrontLine(val) {\n      console.log('切换到总表折线图');\n      this.showLine = true;\n      this.showData = false;\n      this.showRearLine = false;\n      this.showFrontLine = true;\n    },\n    //切换到管理单元折线图\n    switchTRearLine: function switchTRearLine(val) {\n      console.log('切换到管理单元折线图');\n      this.showLine = true;\n      this.showData = false;\n      this.showRearLine = true;\n      this.showFrontLine = false;\n    },\n    //传递总表数据\n    transmitFrontData: function transmitFrontData(val) {\n      this.frontData = val;\n    }\n  },\n  watch: {\n    device: {\n      handler: function handler(val, oldVal) {\n        if (this.device == '管理单元') {\n          console.log('显示管理单元');\n          this.showRear = true;\n          this.showFront = false;\n          this.showFrontLine = false;\n          this.showRearLine = false;\n        }\n\n        if (this.device == '巡查机器人') {\n          console.log('显示总表');\n          this.showRear = false;\n          this.showFront = true;\n          this.showFrontLine = false;\n          this.showRearLine = false;\n        }\n      },\n      // 深度观察监听\n      deep: true\n    },\n    powerSupply: {\n      handler: function handler(val, oldVal) {\n        if (this.powerSupply != '') {\n          this.disabledLine = false;\n          this.powerLine = '';\n        } else {\n          this.disabledLine = true;\n          this.powerLine = '';\n        }\n      },\n      // 深度观察监听\n      deep: true\n    },\n    // line:{\n    // \thandler: function(val, oldVal) {\n    // \t\tif(this.line!=''){\n    // \t\t\tthis.disabledLine=false;\n    // \t\t\tthis.powerLine='';\n    // \t\t\tconsole.log('line');\n    // \t\t\tconsole.log(this.line);\n    // \t\t\tthis.getPowerLineData(this.line.powerSupplyId);\n    // \t\t}else{\n    // \t\t\tthis.disabledLine=true;\n    // \t\t\tthis.powerLine='';\n    // \t\t}\n    // \t},\n    // \t// 深度观察监听\n    // \tdeep: true\n    // },\n    supply: {\n      handler: function handler(val, oldVal) {\n        if (this.supply != '') {\n          this.disabledLine = false;\n          this.powerLine = '';\n          console.log('supply');\n          console.log(this.supply);\n          this.getPowerLineData(this.supply.powerSupplyId);\n        } else {\n          this.disabledLine = true;\n          this.powerLine = '';\n        }\n      },\n      // 深度观察监听\n      deep: true\n    }\n  }\n};",{"version":3,"sources":["show-data.vue"],"names":[],"mappings":"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","sourcesContent":["<!--展示管理单元 以及 总表 的数据-->\r\n<template>\r\n\t<div>\r\n\t\t<div v-if=\"showData\">\r\n\t\t\t<div>\r\n\t\t\t\t<!-- <el-cascader placeholder=\"试试搜索：台变名称\" :options=\"options\" filterable style=\"float: left;width: 400px;margin-right: 10px;margin-top: 20px;\" clearable>\r\n\t\t\t\t</el-cascader> -->\r\n\t\t\t\t<el-autocomplete \r\n\t\t\t\t\tclass=\"inline-input\" \r\n\t\t\t\t\tv-model=\"powerSupply\" \r\n\t\t\t\t\t:fetch-suggestions=\"querySearchSupply\"\r\n\t\t\t\t\tclearable\r\n\t\t\t\t\t placeholder=\"请选择或输入供电所\"\r\n\t\t\t\t\t@select=\"handleSelectSupply\"\r\n\t\t\t\t\tstyle=\"margin-top: 20px;float: left;margin-right: 10px;\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template slot-scope=\"{ item }\">\r\n\t\t\t\t\t\t<div class=\"name\">{{ item.value }}</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-autocomplete>\r\n\t\t\t\t\r\n\t\t\t\t<el-autocomplete\r\n\t\t\t\t\tclass=\"inline-input\" \r\n\t\t\t\t\tv-model=\"powerLine\" \r\n\t\t\t\t\tclearable\r\n\t\t\t\t\t:fetch-suggestions=\"querySearchLine\"\r\n\t\t\t\t\t placeholder=\"请选择或输入台变名称\"\r\n\t\t\t\t\t@select=\"handleSelectLine\"\r\n\t\t\t\t\t:disabled=\"disabledLine\"\r\n\t\t\t\t\tstyle=\"margin-top: 20px;float: left;margin-right: 10px;\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template slot-scope=\"{ item }\">\r\n\t\t\t\t\t\t<div class=\"name\">{{ item.value }}</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-autocomplete>\r\n\t\t\t\t\r\n\t\t\t\t<el-autocomplete\r\n\t\t\t\t\tclass=\"inline-input\" \r\n\t\t\t\t\tv-model=\"rearCollector\" \r\n\t\t\t\t\tclearable\r\n\t\t\t\t\t:fetch-suggestions=\"querySearchLine\"\r\n\t\t\t\t\t placeholder=\"请选择或输入管理单元名称\"\r\n\t\t\t\t\t@select=\"handleSelectLine\"\r\n\t\t\t\t\t:disabled=\"disabledLine\"\r\n\t\t\t\t\tstyle=\"margin-top: 20px;float: left;margin-right: 10px;\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template slot-scope=\"{ item }\">\r\n\t\t\t\t\t\t<div class=\"name\">{{ item.value }}</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-autocomplete>\r\n\t\t\t\t\r\n\t\t\t\t<el-select v-model=\"device\" placeholder=\"选择\" style=\"width: 150px;float: right;margin-top: 20px;margin-right: 35px;\">\r\n\t\t\t\t\t<el-option v-for=\"item in devices\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\r\n\t\t\t\t\t</el-option>\r\n\t\t\t\t</el-select>\r\n\t\t\t\t<el-button icon=\"el-icon-search\" type=\"success\" style=\"margin-top: 20px;float: left;\">搜索</el-button>\r\n\t\t\t</div>\r\n\t\t\t<!--管理单元数据-->\r\n\t\t\t<div v-if=\"showRear\">\r\n\t\t\t\t<PowerDataRear @transmitRearData=\"transmitRearData\" @switchTRearLine=\"switchTRearLine\"></PowerDataRear>\r\n\t\t\t</div>\r\n\r\n\t\t\t<!--总表数据-->\r\n\t\t\t<div v-if='showFront'>\r\n\t\t\t\t<PowerDataFront @transmitFrontData=\"transmitFrontData\" @switchTFrontLine=\"switchTFrontLine\"></PowerDataFront>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div v-if=\"showLine\">\r\n\t\t\t<!--总表的折线图-->\r\n\t\t\t<div v-if='showFrontLine'>\r\n\t\t\t\t<PowerFrontLine></PowerFrontLine>\r\n\t\t\t</div>\r\n\r\n\t\t\t<!--管理单元的折线图-->\r\n\t\t\t<div v-if='showRearLine'>\r\n\t\t\t\t<PowerRearLine></PowerRearLine>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport PowerDataFront from '../components/powerData/power-data-front.vue'\r\n\timport PowerDataRear from '../components/powerData/power-data-rear.vue'\r\n\timport PowerRearLine from '../components/powerData/power-rear-line.vue'\r\n\timport PowerFrontLine from '../components/powerData/power-front-line.vue'\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tPowerDataFront,\r\n\t\t\tPowerDataRear,\r\n\t\t\tPowerRearLine,\r\n\t\t\tPowerFrontLine\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshowRear: true, //是否显示管理单元数据\r\n\t\t\t\tshowFront: false, //是否显示总表数据\r\n\t\t\t\tshowFrontLine: false, //是否显示管理单元折线图数据\r\n\t\t\t\tshowRearLine: false, //是否显示总表折线图数据\r\n\t\t\t\tshowData: true,\r\n\t\t\t\tshowLine: false,\r\n\t\t\t\tfrontData: {}, //存放传过来的总表数据\r\n\t\t\t\trearData: {}, //存放传过来的管理单元数据\r\n\t\t\t\tdevice: '管理单元',\r\n\t\t\t\tdevices: [{\r\n\t\t\t\t\t\tvalue: '管理单元',\r\n\t\t\t\t\t\tlabel: '管理单元'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalue: '巡查机器人',\r\n\t\t\t\t\t\tlabel: '巡查机器人'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tdisabledLine:true,//供电线路输入框是否可用\r\n\t\t\t\t\r\n\t\t\t\tpowerSupply:'',//存放当前选择的供电所(编号和名称)\r\n\t\t\t\tpowerLine:'',//存放当前选择的供电线路(编号和名称)\r\n\t\t\t\trearCollector:'',//存放当前选择的管理单元(编号和名称)\r\n\t\t\t\tsupply:{},//存放当前选择的供电局（所有信息）\r\n\t\t\t\tline:{},//存放当前选择的供电线路（所有信息）\r\n\t\t\t\tpowerSupplyData:[],//存放某个供电局下所有的供电所\r\n\t\t\t\tpowerLineData:[],//存放某个供电所下所有的供电线路\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.getPowerSupplyData();\r\n\t\t\t// this.getPowerLineData(7);\r\n\t\t\t\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//获取供电所下所有的供电线路\r\n\t\t\tgetPowerLineData(id){\r\n\t\t\t\tthis.$get('/Power-Supply/GetSupplyAndLine',{PowerSupplyId:id})\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tconsole.log('成功');\n\t\t\t\t\tconsole.log(response.data);\r\n\t\t\t\t\tvar data=response.data.lineSns;\r\n\t\t\t\t\tconsole.log('data');\r\n\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\tvar powerLines=[];\r\n\t\t\t\t\tfor(var i=0;i<data.length;i++){\r\n\t\t\t\t\t\tthis.$set(powerLines,i,{value:data[i].subStationAreas,lineSn:data[i].lineSn})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.powerLineData=powerLines;\r\n\t\t\t\t\tconsole.log('powerLineData')\r\n\t\t\t\t\tconsole.log(this.powerLineData)\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//获取供电局下的所有供电所\r\n\t\t\tgetPowerSupplyData(){\r\n\t\t\t\tthis.$get('/Power-Supply/GetBureauAndSupply')\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tconsole.log('供电所请求成功');\r\n\t\t\t\t\tconsole.log(response.data);\r\n\t\t\t\t\tvar data=response.data;\r\n\t\t\t\t\tvar powerSupplys=[];\r\n\t\t\t\t\tfor(var i=0;i<data[0].supplys.length;i++){\r\n\t\t\t\t\t\tthis.$set(powerSupplys,i,{value:data[0].supplys[i].psName,powerSupplyId:data[0].supplys[i].powerSupplyId})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.powerSupplyData=powerSupplys;\r\n\t\t\t\t\tconsole.log(this.powerSupplyData);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleSelectSupply(item) {\r\n\t\t\t\t// console.log(item);\r\n\t\t\t\tthis.supply=item;\r\n\t\t\t\tthis.powerSupply=item.value\r\n\t\t\t\tconsole.log('shuju');\r\n\t\t\t\tconsole.log(this.supply);\r\n\t\t\t\tconsole.log(this.powerSupply);\r\n\t\t\t},\r\n\t\t\thandleSelectLine(item) {\r\n\t\t\t\tconsole.log(item);\r\n\t\t\t\tthis.Line=item;\r\n\t\t\t\tconsole.log(this.Line);\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//搜索供电所\r\n\t\t\tquerySearchSupply(queryString, cb) {\r\n\t\t\t\tvar powerSupplyData = this.powerSupplyData;\r\n\t\t\t\tvar results = queryString ? powerSupplyData.filter(this.createFilter(queryString)) : powerSupplyData;\r\n\t\t\t\t// 调用 callback 返回建议列表的数据\r\n\t\t\t\tcb(results);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//搜索供电线路\r\n\t\t\tquerySearchLine(queryString, cb) {\r\n\t\t\t\tvar powerLineData = this.powerLineData;\r\n\t\t\t\tvar results = queryString ? powerLineData.filter(this.createFilter(queryString)) : powerLineData;\r\n\t\t\t\t// 调用 callback 返回建议列表的数据\r\n\t\t\t\tcb(results);\r\n\t\t\t},\r\n\t\t\tcreateFilter(queryString) {\r\n\t\t\t\treturn (restaurant) => {\r\n\t\t\t\t\treturn (restaurant.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t//传递管理单元数据\r\n\t\t\ttransmitRearData(val) {\r\n\t\t\t\tthis.rearData = val;\r\n\t\t\t},\r\n\r\n\t\t\t//切换到总表折线图\r\n\t\t\tswitchTFrontLine(val) {\r\n\t\t\t\tconsole.log('切换到总表折线图');\r\n\t\t\t\tthis.showLine = true;\r\n\t\t\t\tthis.showData = false;\r\n\t\t\t\tthis.showRearLine = false;\r\n\t\t\t\tthis.showFrontLine = true;\r\n\t\t\t},\r\n\r\n\t\t\t//切换到管理单元折线图\r\n\t\t\tswitchTRearLine(val) {\r\n\t\t\t\tconsole.log('切换到管理单元折线图');\r\n\t\t\t\tthis.showLine = true;\r\n\t\t\t\tthis.showData = false;\r\n\t\t\t\tthis.showRearLine = true;\r\n\t\t\t\tthis.showFrontLine = false;\r\n\t\t\t},\r\n\r\n\t\t\t//传递总表数据\r\n\t\t\ttransmitFrontData(val) {\r\n\t\t\t\tthis.frontData = val;\r\n\t\t\t},\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tdevice: {\r\n\t\t\t\thandler: function(val, oldVal) {\r\n\t\t\t\t\tif (this.device == '管理单元') {\r\n\t\t\t\t\t\tconsole.log('显示管理单元');\r\n\t\t\t\t\t\tthis.showRear = true;\r\n\t\t\t\t\t\tthis.showFront = false;\r\n\t\t\t\t\t\tthis.showFrontLine = false;\r\n\t\t\t\t\t\tthis.showRearLine = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.device == '巡查机器人') {\r\n\t\t\t\t\t\tconsole.log('显示总表');\r\n\t\t\t\t\t\tthis.showRear = false;\r\n\t\t\t\t\t\tthis.showFront = true;\r\n\t\t\t\t\t\tthis.showFrontLine = false;\r\n\t\t\t\t\t\tthis.showRearLine = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t// 深度观察监听\r\n\t\t\t\tdeep: true\r\n\t\t\t},\r\n\t\t\tpowerSupply:{\r\n\t\t\t\thandler: function(val, oldVal) {\r\n\t\t\t\t\tif(this.powerSupply!=''){\r\n\t\t\t\t\t\tthis.disabledLine=false;\r\n\t\t\t\t\t\tthis.powerLine='';\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.disabledLine=true;\r\n\t\t\t\t\t\tthis.powerLine='';\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t// 深度观察监听\r\n\t\t\t\tdeep: true\r\n\t\t\t},\r\n\t\t\t// line:{\r\n\t\t\t// \thandler: function(val, oldVal) {\r\n\t\t\t// \t\tif(this.line!=''){\r\n\t\t\t// \t\t\tthis.disabledLine=false;\r\n\t\t\t// \t\t\tthis.powerLine='';\r\n\t\t\t// \t\t\tconsole.log('line');\r\n\t\t\t// \t\t\tconsole.log(this.line);\r\n\t\t\t// \t\t\tthis.getPowerLineData(this.line.powerSupplyId);\r\n\t\t\t// \t\t}else{\r\n\t\t\t// \t\t\tthis.disabledLine=true;\r\n\t\t\t// \t\t\tthis.powerLine='';\r\n\t\t\t// \t\t}\r\n\t\t\t// \t},\r\n\t\t\t// \t// 深度观察监听\r\n\t\t\t// \tdeep: true\r\n\t\t\t// },\r\n\t\t\tsupply:{\r\n\t\t\t\thandler: function(val, oldVal) {\r\n\t\t\t\t\tif(this.supply!=''){\r\n\t\t\t\t\t\tthis.disabledLine=false;\r\n\t\t\t\t\t\tthis.powerLine='';\r\n\t\t\t\t\t\tconsole.log('supply');\r\n\t\t\t\t\t\tconsole.log(this.supply);\r\n\t\t\t\t\t\tthis.getPowerLineData(this.supply.powerSupplyId);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.disabledLine=true;\r\n\t\t\t\t\t\tthis.powerLine='';\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t// 深度观察监听\r\n\t\t\t\tdeep: true\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.demo-table-expand {\r\n\t\tfont-size: 0;\r\n\t}\r\n\r\n\t.demo-table-expand label {\r\n\t\twidth: 90px;\r\n\t\tcolor: #99a9bf;\r\n\t}\r\n\r\n\t.demo-table-expand .el-form-item {\r\n\t\tmargin-right: 0;\r\n\t\tmargin-bottom: 0;\r\n\t\twidth: 50%;\r\n\t}\r\n</style>\n"],"sourceRoot":"src/view"}]}