{"remainingRequest":"E:\\VUE\\VueProject\\electric-power\\node_modules\\babel-loader\\lib\\index.js!E:\\VUE\\VueProject\\electric-power\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\VUE\\VueProject\\electric-power\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\VUE\\VueProject\\electric-power\\src\\components\\frontCollector\\add-front-collector.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\VUE\\VueProject\\electric-power\\src\\components\\frontCollector\\add-front-collector.vue","mtime":1606639267786},{"path":"E:\\VUE\\VueProject\\electric-power\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1599874220956},{"path":"E:\\VUE\\VueProject\\electric-power\\node_modules\\babel-loader\\lib\\index.js","mtime":1599874250055},{"path":"E:\\VUE\\VueProject\\electric-power\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1599874220956},{"path":"E:\\VUE\\VueProject\\electric-power\\node_modules\\vue-loader\\lib\\index.js","mtime":1599874242496}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      addFrontForm: {\n        householdSn: '',\n        powerSupplyID: '',\n        isAlive: false,\n        line: '',\n        type: true\n      },\n      //存放数据\n      powerSupplyData: [],\n      //存放供电所数据\n      lineData: [],\n      //存放供电线路\n      subStationAreasData: [],\n      //存放台区名称\n      disabled1: true,\n      //供电线路编号，不可选\n      disabled2: true,\n      //台区名称，不可选\n      totalNum: 0\n    };\n  },\n  mounted: function mounted() {\n    this.getPowerSupplyData(6);\n    this.getLineTotal();\n  },\n  methods: {\n    //刷新el-select的下拉数据\n    changeData: function changeData() {\n      this.$forceUpdate();\n    },\n    //获取供电所下线路的总数\n    getLineTotal: function getLineTotal() {\n      var _this = this;\n\n      this.$axios({\n        method: 'get',\n        url: '/Power-Supply/GetLine',\n        params: {\n          currentPage: 1,\n          pageSize: 1\n        }\n      }).then(function (response) {\n        console.log('供电线路总数请求成功');\n        console.log(response.data.data.total);\n        _this.totalNum = response.data.data.total;\n        console.log(_this.totalNum);\n\n        _this.getPowerLineData(null);\n      }).catch(function (error) {\n        // 请求失败\n        console.log('请求失败');\n        console.log(error);\n      });\n    },\n    //获取供电所下所有的供电线路\n    getPowerLineData: function getPowerLineData(id) {\n      var _this2 = this;\n\n      var getData = {\n        currentPage: 1,\n        pageSize: this.totalNum\n      };\n\n      if (id != null) {\n        this.$set(getData, 'PowerSupplyId', id);\n      }\n\n      console.log('getData');\n      console.log(getData);\n      this.$axios({\n        method: 'get',\n        url: '/Power-Supply/GetLine',\n        params: getData\n      }).then(function (response) {\n        console.log('供电线路请求成功');\n        console.log(response.data);\n        var lineData = [];\n        var data = response.data;\n\n        if (response.data.code == 200) {\n          for (var i = 0; i < data.data.lineSns.length; i++) {\n            _this2.$set(lineData, i, {\n              value: data.data.lineSns[i].lineSn\n            });\n          }\n\n          console.log(lineData);\n          _this2.lineData = lineData;\n        } else {\n          _this2.$message({\n            message: '该供电所暂时没有供电线路',\n            type: 'warning'\n          });\n\n          _this2.lineData = [];\n        }\n      }).catch(function (error) {\n        // 请求失败\n        console.log('请求失败');\n        console.log(error);\n      });\n    },\n    //获取供电局下的所有供电所\n    getPowerSupplyData: function getPowerSupplyData(num) {\n      var _this3 = this;\n\n      this.$axios({\n        method: 'get',\n        url: '/Power-Supply/GetBureauAndSupply',\n        params: {\n          PowerBureauId: num\n        }\n      }).then(function (response) {\n        console.log('供电所请求成功');\n        console.log(response.data);\n        var data = response.data.data;\n        var powerSupplys = [];\n\n        if (data[0].supplys.length != 0) {\n          for (var i = 0; i < data[0].supplys.length; i++) {\n            _this3.$set(powerSupplys, i, {\n              value: data[0].supplys[i].psName,\n              id: data[0].supplys[i].powerSupplyId\n            });\n          }\n\n          _this3.powerSupplyData = powerSupplys;\n          console.log('powerSupplyData');\n          console.log(_this3.powerSupplyData);\n        } else {\n          _this3.$message({\n            message: '该供电局暂时没有供电所',\n            type: 'warning'\n          });\n        }\n      }).catch(function (error) {\n        // 请求失败\n        console.log('请求失败');\n        console.log(error);\n      });\n    },\n    //隐藏添加界面\n    hideAddFront1: function hideAddFront1() {\n      console.log('隐藏');\n      this.$emit(\"hideAddFront1\", false);\n    },\n    //隐藏添加界面\n    hideAddFront2: function hideAddFront2() {\n      console.log('隐藏');\n      this.$emit(\"hideAddFront2\", false);\n    },\n    //时间转换\n    formatDate: function formatDate(date) {\n      var Y = date.getFullYear();\n      var M = this.addZero(date.getMonth() + 1);\n      var D = this.addZero(date.getDate()); // var h=this.addZero(date.getHours());\n      // var m=this.addZero(date.getMinutes());\n      // var s=this.addZero(date.getSeconds());\n\n      console.log(Y + '-' + M + '-' + D);\n      return Y + '-' + M + '-' + D;\n    },\n    //给小于10的数加0\n    addZero: function addZero(num) {\n      return num < 10 ? '0' + num : num;\n    },\n    //添加巡检机器人\n    submitForm: function submitForm(formName) {\n      var _this4 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          var addfront = _this4.addFrontForm;\n\n          if (addfront.putOperationDate != null) {\n            addfront.putOperationDate = _this4.formatDate(addfront.putOperationDate);\n          }\n\n          ;\n          addfront.ratedVoltage = addfront.ratedVoltage - 0;\n          addfront.ratio = addfront.ratio - 0;\n\n          _this4.$set(addfront, 'addDate', _this4.formatDate(new Date()));\n\n          _this4.$set(addfront, 'terminalNum', addfront.commAddress);\n\n          console.log('addfront1');\n          console.log(addfront);\n          var addtransformer = {\n            LineSn: addfront.lineSn,\n            SubStationAreas: addfront.subStationAreas,\n            Capacity: addfront.capacity,\n            Principal: addfront.principal,\n            VoltageRatio: addfront.VoltageRatio,\n            Currentratio: addfront.Currentratio\n          };\n\n          _this4.$set(addtransformer, 'Ratio', addfront.VoltageRatio * addfront.Currentratio);\n\n          _this4.$axios({\n            method: 'post',\n            url: '/Transformer/AddTransformer',\n            params: addtransformer\n          }).then(function (response) {\n            console.log('台变添加成功');\n            console.log(response);\n            var transformer = {\n              line_sn: addfront.lineSn,\n              SubStationAreas: addfront.subStationAreas\n            };\n            console.log('transformer');\n            console.log(transformer);\n\n            _this4.$axios({\n              method: 'get',\n              url: '/Transformer/GetTransformer',\n              params: transformer\n            }).then(function (response) {\n              console.log('台变ID获取成功');\n              console.log(response);\n\n              _this4.$set(addfront, 'transformerId', response.data.data[0].transformerId);\n\n              console.log('addfront2');\n              console.log(addfront);\n\n              _this4.$axios({\n                method: 'post',\n                url: '/Terminal/AddType1',\n                data: addfront\n              }).then(function (response) {\n                console.log('response');\n                console.log(response); // console.log(JSON.stringify(response.data.code));\n\n                if (response.data.code == 200) {\n                  console.log('成功');\n\n                  _this4.$message({\n                    message: '巡检机器人添加成功',\n                    type: 'success'\n                  });\n\n                  _this4.addFrontForm.putOperationDate = null;\n                  _this4.addFrontForm.terminalNum = '';\n                  _this4.addFrontForm.subStationAreas = '';\n                  _this4.addFrontForm.commAddress = '';\n\n                  _this4.hideAddFront2();\n                } else {\n                  console.log('出错');\n\n                  _this4.$message({\n                    message: '数据输入有误，添加失败，请重新填写',\n                    type: 'warning'\n                  });\n\n                  _this4.addFrontForm.terminalNum = '';\n                  _this4.addFrontForm.subStationAreas = '';\n                  _this4.addFrontForm.commAddress = '';\n                  _this4.addFrontForm.putOperationDate = null;\n                }\n              }).catch(function (error) {\n                // 请求失败\n                console.log('请求失败');\n                console.log(error);\n              });\n            }).catch(function (error) {\n              // 请求失败\n              console.log('请求失败');\n              console.log(error);\n            });\n          }).catch(function (error) {\n            // 请求失败\n            console.log('请求失败');\n            console.log(error);\n          });\n        }\n      });\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n    }\n  },\n  watch: {\n    'addFrontForm.department': {\n      handler: function handler(val, oldVal) {\n        console.log('department');\n        console.log(JSON.stringify(val));\n\n        if (val == '' || val == null) {\n          console.log('zhixin1');\n          this.addFrontForm.lineSn = '';\n          this.lineData = [];\n          this.addFrontForm.subStationAreas = '';\n          this.disabled1 = true;\n          this.disabled2 = true;\n        } else {\n          // if(this.lineData.length==this.totalNum){\n          // \tthis.$message({\n          // \t\tmessage: '暂时没有供电线路',\n          // \t\ttype: 'warning'\n          // \t});\n          // }else{\n          console.log('zhixin2');\n          this.disabled1 = false;\n          this.disabled2 = true;\n          console.log('val2');\n          console.log(val);\n          var supplyData = {};\n          supplyData = this.powerSupplyData.find(function (item) {\n            //这里的就是上面遍历的数据源\n            return item.value == val; //筛选出匹配数据，是对应数据的整个对象\n          });\n          console.log('supplyData');\n          console.log(supplyData);\n          this.addFrontForm.powerSupplyID = supplyData.id;\n          this.getPowerLineData(supplyData.id); //请求供电所下所有的供电线路\n\n          console.log(this.lineData); //}\n        }\n      }\n    },\n    'addFrontForm.lineSn': {\n      handler: function handler(val, oldVal) {\n        console.log('val-line');\n        console.log(JSON.stringify(val));\n\n        if (val == '' || val == null) {\n          this.addFrontForm.subStationAreas = '';\n          this.disabled2 = true;\n        } else {\n          this.disabled2 = false;\n          console.log('line   dis', this.disabled2);\n          var lineData = {};\n          console.log('val');\n          console.log(val);\n          lineData = this.lineData.find(function (item) {\n            //这里的就是上面遍历的数据源\n            return item.value == val; //筛选出匹配数据，是对应数据的整个对象\n          });\n          this.lineSn = lineData.value;\n        }\n      }\n    }\n  }\n};",{"version":3,"sources":["add-front-collector.vue"],"names":[],"mappings":"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","sourcesContent":["<!--添加后端收集器-->\r\n<template>\r\n\t<div>\r\n\t\t<el-form ref=\"addFrontForm\" :model=\"addFrontForm\" label-width=\"110px\" size=\"mini\" label-position=\"left\">\r\n\t\t\t<div class=\"divSty\">\r\n\t\t\t\t<el-form-item \r\n\t\t\t\t\tlabel=\"终端通讯地址\" \r\n\t\t\t\t\tprop=\"commAddress\"\r\n\t\t\t\t\t:rules=\"[\r\n\t\t\t\t\t\t{ required: true, message: '请输入终端通讯地址', trigger: 'blur' },\r\n\t\t\t\t\t\t{pattern: /^[0-9]\\d*$/,message: '终端通讯地址只能输入数字',trigger: 'change'}\r\n\t\t\t\t\t]\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<el-input v-model=\"addFrontForm.commAddress\" clearable></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"divSty\">\r\n\t\t\t\t<el-form-item label=\"供电单位\">\r\n\t\t\t\t\t<el-select \r\n\t\t\t\t\t\tv-model=\"addFrontForm.department\" \r\n\t\t\t\t\t\tfilterable \r\n\t\t\t\t\t\tclearable \r\n\t\t\t\t\t\tplaceholder=\"请选择\" \r\n\t\t\t\t\t\tstyle=\"width: 100%;\" \r\n\t\t\t\t\t\t@change=\"changeData\">\r\n\t\t\t\t\t  <el-option\r\n\t\t\t\t\t    v-for=\"item in powerSupplyData\"\r\n\t\t\t\t\t    :key=\"item.id\"\r\n\t\t\t\t\t    :label=\"item.value\"\r\n\t\t\t\t\t    :value=\"item.value\">\r\n\t\t\t\t\t  </el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"divSty\">\r\n\t\t\t\t<el-form-item label=\"供电线路编号\" >\r\n\t\t\t\t\t<!--不为空-->\r\n\t\t\t\t\t<el-select \r\n\t\t\t\t\t\tv-model=\"addFrontForm.lineSn\" \r\n\t\t\t\t\t\tfilterable \r\n\t\t\t\t\t\tclearable \r\n\t\t\t\t\t\tplaceholder=\"请选择\" \r\n\t\t\t\t\t\tstyle=\"width: 100%;\" \r\n\t\t\t\t\t\t:disabled=\"disabled1\" \r\n\t\t\t\t\t\t@change=\"changeData\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t  <el-option\r\n\t\t\t\t\t    v-for=\"(item,index) in lineData\"\r\n\t\t\t\t\t    :key=\"item.index\"\r\n\t\t\t\t\t    :label=\"item.value\"\r\n\t\t\t\t\t    :value=\"item.value\">\r\n\t\t\t\t\t  </el-option>\r\n\t\t\t\t\t</el-select>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"divSty\">\r\n\t\t\t\t<el-form-item label=\"台区名称\" >\r\n\t\t\t\t\t<el-input v-model=\"addFrontForm.subStationAreas\" clearable @input=\"changeData\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"divSty\">\r\n\t\t\t\t<el-form-item label=\"终端型号\">\r\n\t\t\t\t\t<el-input v-model=\"addFrontForm.model\" clearable></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"divSty\">\r\n\t\t\t\t<el-form-item label=\"通讯规约\">\r\n\t\t\t\t\t<el-input v-model=\"addFrontForm.commProtocol\" clearable></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"divSty\">\r\n\t\t\t\t<el-form-item label=\"SIM卡号\">\r\n\t\t\t\t\t<el-input v-model=\"addFrontForm.simNumber\" clearable></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"divSty\">\r\n\t\t\t\t<el-form-item label=\"额定电压\">\r\n\t\t\t\t\t<el-input v-model=\"addFrontForm.ratedVoltage\" clearable></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"divSty\">\r\n\t\t\t\t<el-form-item label=\"安装地址\">\r\n\t\t\t\t\t<el-input v-model=\"addFrontForm.location\" clearable></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"divSty\">\r\n\t\t\t\t<el-form-item label=\"总表规格型号\">\r\n\t\t\t\t\t<el-input v-model=\"addFrontForm.capacity\" clearable></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</div>\r\n\t\t\t<!-- <div class=\"divSty\">\r\n\t\t\t\t<el-form-item label=\"总表综合倍率\">\r\n\t\t\t\t\t<el-input v-model=\"addFrontForm.ratio\" clearable></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</div> -->\r\n\t\t\t<div class=\"divSty\">\r\n\t\t\t\t<el-form-item label=\"总表电压倍率\">\r\n\t\t\t\t\t<el-input v-model=\"addFrontForm.VoltageRatio\" clearable></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"divSty\">\r\n\t\t\t\t<el-form-item label=\"总表电流倍率\">\r\n\t\t\t\t\t<el-input v-model=\"addFrontForm.Currentratio\" clearable></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"divSty\">\r\n\t\t\t\t<el-form-item label=\"台变负责人\">\r\n\t\t\t\t\t<el-input v-model=\"addFrontForm.principal\" clearable></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"divSty\">\r\n\t\t\t\t<el-form-item label=\"投运日期\">\r\n\t\t\t\t\t<el-date-picker\r\n\t\t\t\t\t  v-model=\"addFrontForm.putOperationDate\"\r\n\t\t\t\t\t  type=\"date\"\r\n\t\t\t\t\t  clearable\r\n\t\t\t\t\t  style=\"width: 290px;\"\r\n\t\t\t\t\t  placeholder=\"选择日期\">\r\n\t\t\t\t\t</el-date-picker>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</div>\r\n\t\t\t<div style=\"clear:both\"></div>\r\n\t\t\t\r\n\t\t\t<div style=\"height:40px;width:260px;margin-left:auto;margin-top: 20px;\">\r\n\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('addFrontForm')\" size=\"mini\">添加</el-button>\r\n\t\t\t\t<el-button @click=\"hideAddFront1\" size=\"mini\">取消</el-button>\r\n\t\t\t</div>\r\n\r\n\t\t</el-form>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\taddFrontForm:{\r\n\t\t\t\t\thouseholdSn:'',\r\n\t\t\t\t\tpowerSupplyID:'',\r\n\t\t\t\t\tisAlive:false,\r\n\t\t\t\t\tline:'',\r\n\t\t\t\t\ttype:true\r\n\t\t\t\t}, //存放数据\r\n\t\t\t\t\r\n\t\t\t\tpowerSupplyData:[],//存放供电所数据\r\n\t\t\t\tlineData:[],//存放供电线路\r\n\t\t\t\tsubStationAreasData:[],//存放台区名称\r\n\t\t\t\t\r\n\t\t\t\tdisabled1:true,//供电线路编号，不可选\r\n\t\t\t\tdisabled2:true,//台区名称，不可选\r\n\t\t\t\t\r\n\t\t\t\ttotalNum:0,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.getPowerSupplyData(6);\r\n\t\t\tthis.getLineTotal();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//刷新el-select的下拉数据\r\n\t\t\tchangeData(){\r\n\t\t\t\tthis.$forceUpdate();\r\n\t\t\t},\r\n\t\t\t//获取供电所下线路的总数\r\n\t\t\tgetLineTotal(){\r\n\t\t\t\tthis.$axios({\r\n\t\t\t\t\tmethod: 'get',\r\n\t\t\t\t\turl:'/Power-Supply/GetLine',\r\n\t\t\t\t\tparams:{\r\n\t\t\t\t\t\t currentPage:1,\r\n\t\t\t\t\t\t pageSize:1\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(response => {\r\n\t\t\t\t\tconsole.log('供电线路总数请求成功');\r\n\t\t\t\t\tconsole.log(response.data.data.total);\r\n\t\t\t\t\tthis.totalNum=response.data.data.total;\r\n\t\t\t\t\tconsole.log(this.totalNum);\r\n\t\t\t\t\tthis.getPowerLineData(null);\r\n\t\t\t\t}).catch(error => {  // 请求失败\r\n\t\t\t\t\tconsole.log('请求失败');\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//获取供电所下所有的供电线路\r\n\t\t\tgetPowerLineData(id){\r\n\t\t\t\tvar getData={\r\n\t\t\t\t\tcurrentPage:1,\r\n\t\t\t\t\tpageSize:this.totalNum\r\n\t\t\t\t};\r\n\t\t\t\tif(id!=null){\r\n\t\t\t\t\tthis.$set(getData,'PowerSupplyId',id)\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log('getData');\r\n\t\t\t\tconsole.log(getData);\r\n\t\t\t\tthis.$axios({\r\n\t\t\t\t\t method: 'get',\r\n\t\t\t\t\t url:'/Power-Supply/GetLine',\r\n\t\t\t\t\t params:getData\r\n\t\t\t\t}).then(response => {\r\n\t\t\t\t\tconsole.log('供电线路请求成功');\r\n\t\t\t\t\tconsole.log(response.data);\r\n\t\t\t\t\tvar lineData=[];\r\n\t\t\t\t\tvar data=response.data;\r\n\t\t\t\t\tif(response.data.code==200){\r\n\t\t\t\t\t\tfor(var i=0;i<data.data.lineSns.length;i++){\r\n\t\t\t\t\t\t\tthis.$set(lineData,i,{value:data.data.lineSns[i].lineSn})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log(lineData);\r\n\t\t\t\t\t\tthis.lineData=lineData;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\tmessage: '该供电所暂时没有供电线路',\r\n\t\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.lineData=[];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}).catch(error => {  // 请求失败\r\n\t\t\t\t\tconsole.log('请求失败');\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//获取供电局下的所有供电所\r\n\t\t\tgetPowerSupplyData(num){\r\n\t\t\t\tthis.$axios({\r\n\t\t\t\t\tmethod: 'get',\r\n\t\t\t\t\turl:'/Power-Supply/GetBureauAndSupply',\r\n\t\t\t\t\tparams: {PowerBureauId:num}\r\n\t\t\t\t}).then(response => {\r\n\t\t\t\t\tconsole.log('供电所请求成功');\r\n\t\t\t\t\tconsole.log(response.data);\r\n\t\t\t\t\tvar data=response.data.data;\r\n\t\t\t\t\tvar powerSupplys=[];\r\n\t\t\t\t\tif(data[0].supplys.length!=0){\r\n\t\t\t\t\t\tfor(var i=0;i<data[0].supplys.length;i++){\r\n\t\t\t\t\t\t\tthis.$set(powerSupplys,i,{value:data[0].supplys[i].psName,id:data[0].supplys[i].powerSupplyId})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.powerSupplyData=powerSupplys;\r\n\t\t\t\t\t\tconsole.log('powerSupplyData');\r\n\t\t\t\t\t\tconsole.log(this.powerSupplyData);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\tmessage: '该供电局暂时没有供电所',\r\n\t\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(error => { // 请求失败\r\n\t\t\t\t\tconsole.log('请求失败');\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//隐藏添加界面\r\n\t\t\thideAddFront1() {\r\n\t\t\t\tconsole.log('隐藏');\r\n\t\t\t\tthis.$emit(\"hideAddFront1\",false);\r\n\t\t\t},\r\n\t\t\t//隐藏添加界面\r\n\t\t\thideAddFront2(){\r\n\t\t\t\tconsole.log('隐藏');\r\n\t\t\t\tthis.$emit(\"hideAddFront2\",false);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//时间转换\r\n\t\t\tformatDate(date){\r\n\t\t\t\tvar Y=date.getFullYear();\r\n\t\t\t\tvar M=this.addZero(date.getMonth()+1);\r\n\t\t\t\tvar D=this.addZero(date.getDate());\r\n\t\t\t\t\r\n\t\t\t\t// var h=this.addZero(date.getHours());\r\n\t\t\t\t// var m=this.addZero(date.getMinutes());\r\n\t\t\t\t// var s=this.addZero(date.getSeconds());\r\n\t\t\t\tconsole.log(Y+'-'+M+'-'+D);\r\n\t\t\t\treturn Y+'-'+M+'-'+D\r\n\t\t\t},\r\n\t\t\t//给小于10的数加0\r\n\t\t\taddZero(num) {\r\n\t\t\t\treturn num < 10 ? '0' + num : num;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//添加巡检机器人\r\n\t\t\tsubmitForm(formName) {\r\n\t\t\t\tthis.$refs[formName].validate((valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tvar addfront=this.addFrontForm;\r\n\t\t\t\t\t\tif(addfront.putOperationDate!=null){\r\n\t\t\t\t\t\t\taddfront.putOperationDate=this.formatDate(addfront.putOperationDate);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\taddfront.ratedVoltage=addfront.ratedVoltage-0;\r\n\t\t\t\t\t\taddfront.ratio=addfront.ratio-0;\r\n\t\t\t\t\t\tthis.$set(addfront,'addDate',this.formatDate(new Date));\r\n\t\t\t\t\t\tthis.$set(addfront,'terminalNum',addfront.commAddress);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconsole.log('addfront1');\r\n\t\t\t\t\t\tconsole.log(addfront);\r\n\t\t\t\t\t\tvar addtransformer={\r\n\t\t\t\t\t\t\tLineSn:addfront.lineSn,\r\n\t\t\t\t\t\t\tSubStationAreas:addfront.subStationAreas,\r\n\t\t\t\t\t\t\tCapacity: addfront.capacity,\r\n\t\t\t\t\t\t\tPrincipal: addfront.principal,\r\n\t\t\t\t\t\t\tVoltageRatio:addfront.VoltageRatio,\r\n\t\t\t\t\t\t\tCurrentratio:addfront.Currentratio\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.$set(addtransformer,'Ratio',addfront.VoltageRatio*addfront.Currentratio);\r\n\t\t\t\t\t\tthis.$axios({\r\n\t\t\t\t\t\t\t method: 'post',\r\n\t\t\t\t\t\t\t url:'/Transformer/AddTransformer',\r\n\t\t\t\t\t\t\t params:addtransformer\r\n\t\t\t\t\t\t}).then(response => {\r\n\t\t\t\t\t\t\tconsole.log('台变添加成功');\r\n\t\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\t\tvar transformer={\r\n\t\t\t\t\t\t\t\tline_sn:addfront.lineSn,\r\n\t\t\t\t\t\t\t\tSubStationAreas:addfront.subStationAreas,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tconsole.log('transformer');\r\n\t\t\t\t\t\t\tconsole.log(transformer);\r\n\t\t\t\t\t\t\tthis.$axios({\r\n\t\t\t\t\t\t\t\t method: 'get',\r\n\t\t\t\t\t\t\t\t url:'/Transformer/GetTransformer',\r\n\t\t\t\t\t\t\t\t params:transformer\r\n\t\t\t\t\t\t\t}).then(response => {\r\n\t\t\t\t\t\t\t\tconsole.log('台变ID获取成功');\r\n\t\t\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\t\t\tthis.$set(addfront,'transformerId',response.data.data[0].transformerId);\r\n\t\t\t\t\t\t\t\tconsole.log('addfront2');\r\n\t\t\t\t\t\t\t\tconsole.log(addfront);\r\n\t\t\t\t\t\t\t\tthis.$axios({\r\n\t\t\t\t\t\t\t\t\t method: 'post',\r\n\t\t\t\t\t\t\t\t\t url:'/Terminal/AddType1',\r\n\t\t\t\t\t\t\t\t\t data:addfront\r\n\t\t\t\t\t\t\t\t}).then(response => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('response');\r\n\t\t\t\t\t\t\t\t\tconsole.log(response);\r\n\t\t\t\t\t\t\t\t\t// console.log(JSON.stringify(response.data.code));\r\n\t\t\t\t\t\t\t\t\tif(response.data.code==200){\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('成功');\r\n\t\t\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\t\t  message: '巡检机器人添加成功',\r\n\t\t\t\t\t\t\t\t\t\t  type: 'success'\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tthis.addFrontForm.putOperationDate=null;\r\n\t\t\t\t\t\t\t\t\t\tthis.addFrontForm.terminalNum='';\r\n\t\t\t\t\t\t\t\t\t\tthis.addFrontForm.subStationAreas='';\r\n\t\t\t\t\t\t\t\t\t\tthis.addFrontForm.commAddress='';\r\n\t\t\t\t\t\t\t\t\t\tthis.hideAddFront2();\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('出错');\r\n\t\t\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\t\t\t  message: '数据输入有误，添加失败，请重新填写',\r\n\t\t\t\t\t\t\t\t\t\t\t  type: 'warning'\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tthis.addFrontForm.terminalNum='';\r\n\t\t\t\t\t\t\t\t\t\tthis.addFrontForm.subStationAreas='';\r\n\t\t\t\t\t\t\t\t\t\tthis.addFrontForm.commAddress='';\r\n\t\t\t\t\t\t\t\t\t\tthis.addFrontForm.putOperationDate=null;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}).catch(error => {  // 请求失败\r\n\t\t\t\t\t\t\t\t\tconsole.log('请求失败');\r\n\t\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}).catch(error => {  // 请求失败\r\n\t\t\t\t\t\t\t\tconsole.log('请求失败');\r\n\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}).catch(error => {  // 请求失败\r\n\t\t\t\t\t\t\tconsole.log('请求失败');\r\n\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tresetForm(formName) {\r\n\t\t\t\tthis.$refs[formName].resetFields();\r\n\t\t\t},\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\t'addFrontForm.department':{\r\n\t\t\t\thandler: function(val, oldVal) {\r\n\t\t\t\t\tconsole.log('department');\r\n\t\t\t\t\tconsole.log(JSON.stringify(val));\r\n\t\t\t\t\tif(val=='' || val==null){\r\n\t\t\t\t\t\tconsole.log('zhixin1');\r\n\t\t\t\t\t\tthis.addFrontForm.lineSn='';\r\n\t\t\t\t\t\tthis.lineData=[];\r\n\t\t\t\t\t\tthis.addFrontForm.subStationAreas='';\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.disabled1=true;\r\n\t\t\t\t\t\tthis.disabled2=true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// if(this.lineData.length==this.totalNum){\r\n\t\t\t\t\t\t// \tthis.$message({\r\n\t\t\t\t\t\t// \t\tmessage: '暂时没有供电线路',\r\n\t\t\t\t\t\t// \t\ttype: 'warning'\r\n\t\t\t\t\t\t// \t});\r\n\t\t\t\t\t\t// }else{\r\n\t\t\t\t\t\t\tconsole.log('zhixin2');\r\n\t\t\t\t\t\t\tthis.disabled1=false;\r\n\t\t\t\t\t\t\tthis.disabled2=true;\r\n\t\t\t\t\t\t\tconsole.log('val2');\r\n\t\t\t\t\t\t\tconsole.log(val);\r\n\t\t\t\t\t\t\tlet supplyData = {};\r\n\t\t\t\t\t\t\tsupplyData = this.powerSupplyData.find((item)=>{//这里的就是上面遍历的数据源\r\n\t\t\t\t\t\t\t\t return item.value == val;\r\n\t\t\t\t\t\t\t\t //筛选出匹配数据，是对应数据的整个对象\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tconsole.log('supplyData');\r\n\t\t\t\t\t\t\tconsole.log(supplyData);\r\n\t\t\t\t\t\t\tthis.addFrontForm.powerSupplyID=supplyData.id;\r\n\t\t\t\t\t\t\tthis.getPowerLineData(supplyData.id);//请求供电所下所有的供电线路\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tconsole.log(this.lineData);\r\n\t\t\t\t\t\t//}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t'addFrontForm.lineSn':{\r\n\t\t\t\thandler: function(val, oldVal) {\r\n\t\t\t\t\tconsole.log('val-line');\r\n\t\t\t\t\tconsole.log(JSON.stringify(val));\r\n\t\t\t\t\tif(val=='' || val==null){\r\n\t\t\t\t\t\tthis.addFrontForm.subStationAreas='';\r\n\t\t\t\t\t\tthis.disabled2=true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.disabled2=false;\r\n\t\t\t\t\t\tconsole.log('line   dis',this.disabled2);\r\n\t\t\t\t\t\tlet lineData = {};\r\n\t\t\t\t\t\tconsole.log('val');\r\n\t\t\t\t\t\tconsole.log(val);\r\n\t\t\t\t\t\tlineData = this.lineData.find((item)=>{//这里的就是上面遍历的数据源\r\n\t\t\t\t\t\t\t return item.value == val;\r\n\t\t\t\t\t\t\t //筛选出匹配数据，是对应数据的整个对象\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.lineSn=lineData.value;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style scoped=\"scoped\">\r\n\t.divSty {\r\n\t\tfloat: left;\r\n\t\tmargin-left: 30px;\r\n\t\tmargin-top: 10px;\r\n\t\twidth: 400px;\r\n\t\t/* border:1px solid #000000 */\r\n\t}\r\n</style>\n"],"sourceRoot":"src/components/frontCollector"}]}